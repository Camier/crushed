{
  "$schema": "https://charm.land/crush.json",
  "providers": {
    "vllm-local": {
      "name": "vLLM (local)",
      "base_url": "$(echo ${CRUSH_VLLM_BASE_URL:-http://127.0.0.1:8000/v1/})",
      "type": "openai",
      "startup_command": "$(echo ${CRUSH_VLLM_STARTUP_COMMAND:-})",
      "startup_timeout_seconds": 600,
      "startup_health_path": "$(echo ${CRUSH_VLLM_HEALTH_PATH:-/models})",
      "models": [
        {
          "name": "$(echo ${CRUSH_VLLM_MODEL_NAME:-local-model})",
          "id": "$(echo ${CRUSH_VLLM_MODEL_ID:-local-model})",
          "context_window": 8192,
          "default_max_tokens": 1024
        }
      ]
    },
    "llamacpp": {
      "name": "llama.cpp (local)",
      "base_url": "$(echo ${CRUSH_LLAMACPP_BASE_URL:-http://127.0.0.1:8080/v1/})",
      "type": "openai",
      "startup_command": "$(echo ${CRUSH_LLAMACPP_STARTUP_COMMAND:-})",
      "startup_timeout_seconds": 600,
      "models": [
        {
          "name": "$(echo ${CRUSH_LLAMACPP_MODEL_NAME:-Qwen2.5-14B-Instruct})",
          "id": "$(echo ${CRUSH_LLAMACPP_MODEL_ID:-qwen2.5-14b-instruct})",
          "context_window": 32768,
          "default_max_tokens": 1024
        }
      ]
    },
    "openai": {
      "type": "openai",
      "api_key": "$(pass show services/mcp/openai-token 2>/dev/null || pass show mcp/openai/api-key 2>/dev/null || echo ${OPENAI_API_KEY:-})"
    },
    "anthropic": {
      "type": "anthropic",
      "api_key": "$(pass show services/mcp/anthropic-token 2>/dev/null || pass show mcp/anthropic/api-key 2>/dev/null || echo ${ANTHROPIC_API_KEY:-})"
    },
    "openrouter": {
      "type": "openai",
      "base_url": "https://openrouter.ai/api/v1",
      "api_key": "$(pass show services/mcp/openrouter-token 2>/dev/null || pass show mcp/openrouter/api-key 2>/dev/null || echo ${OPENROUTER_API_KEY:-})"
    },
    "perplexity": {
      "type": "openai",
      "base_url": "https://api.perplexity.ai",
      "api_key": "$(pass show services/mcp/perplexity-token 2>/dev/null || pass show mcp/perplexity/api-key 2>/dev/null || echo ${PPLX_API_KEY:-${PERPLEXITY_API_KEY:-}})"
    }
  },
  "models": {
    "large": {
      "provider": "$(echo ${CRUSH_DEFAULT_LARGE_PROVIDER:-llamacpp})",
      "model": "$(echo ${CRUSH_DEFAULT_LARGE_MODEL:-qwen2.5-14b-instruct})"
    },
    "small": {
      "provider": "$(echo ${CRUSH_DEFAULT_SMALL_PROVIDER:-vllm-local})",
      "model": "$(echo ${CRUSH_DEFAULT_SMALL_MODEL:-local-model})"
    }
  },
  "options": {
    "context_paths": [],
    "disabled_tools": []
  },
  "mcp": {
    "github": {
      "type": "stdio",
      "command": "npx",
      "args": [
        "-y",
        "@cyanheads/git-mcp-server"
      ],
      "env": {
        "GITHUB_TOKEN": "$(pass show mcp/github/pat 2>/dev/null || pass show mcp/github/token 2>/dev/null || pass show services/mcp/github-token 2>/dev/null || echo ${GITHUB_TOKEN:-})",
        "MCP_LOG_LEVEL": "$(echo ${MCP_LOG_LEVEL:-info})"
      }
    },
    "context7": {
      "type": "http",
      "url": "https://api.context7.dev/mcp/",
      "headers": {
        "Authorization": "$(echo Bearer $(pass show services/mcp/context7/token 2>/dev/null || pass show mcp/context7/api-key 2>/dev/null || echo ${CONTEXT7_API_KEY:-}))"
      }
    }
  }
}
